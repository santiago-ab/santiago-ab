(window.webpackJsonptrello=window.webpackJsonptrello||[]).push([[0],{38:function(e,t,a){e.exports=a(79)},43:function(e,t,a){},44:function(e,t,a){},76:function(e,t){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(36),i=a.n(r),o=(a(43),a(1)),l=a(2),c=a(4),m=a(3),u=a(5),p=(a(44),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("nav",{className:"navbar navbar-light bg-dark p-0"},s.a.createElement("ul",{className:"navbar-nav mr-auto"},s.a.createElement("li",{className:"nav-item active"},s.a.createElement("img",{src:"/logo.png",className:"",alt:"logo",width:"80px"}))),s.a.createElement("ul",{className:"navbar-nav ml-auto"},s.a.createElement("li",{className:"nav-item active"},s.a.createElement("button",{className:"btn btn-sm text-light",onClick:function(){e.props.logout()}},"Logout"))))}}]),t}(n.Component)),h=a(6),d=a(10),v=a(7),b=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={inputPrivate:"",privmessages:[]},e.handleInput=e.handleInput.bind(Object(v.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(v.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.nombre!==e.nombre){this.setState({privmessages:[]}),this.props.socket.emit("load private chat",this.props.nombre,function(e){t.setState({privmessages:e})});var a=document.getElementById("PrivChat");a.scrollTop=a.scrollHeight}}},{key:"componentWillMount",value:function(){var e=this;this.props.socket.emit("load private chat",this.props.nombre,function(t){e.setState({privmessages:t})}),this.props.socket.on("new priv message",function(t){t.from===e.props.nombre&&e.setState({privmessages:[].concat(Object(d.a)(e.state.privmessages),[t])})})}},{key:"handleInput",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),new RegExp(/^[<>]+$/g).test(this.state.inputPrivate))this.setState({inputPrivate:""});else{this.props.socket.emit("send priv message",this.props.nombre,this.state.inputPrivate);var t={from:this.props.minombre,msg:this.state.inputPrivate};this.setState({privmessages:[].concat(Object(d.a)(this.state.privmessages),[t])}),this.setState({inputPrivate:""});var a=document.getElementById("PrivChat");a.scrollTop=a.scrollHeight}}},{key:"render",value:function(){var e=this,t=this.state.privmessages.map(function(t,a){return t.from===e.props.minombre?s.a.createElement("div",{className:"col-7 ml-auto text-right px-0 py-2"},s.a.createElement("span",{className:"p-2",style:{borderRadius:"10px",backgroundColor:"#b5ffb9"}},s.a.createElement("span",{style:{fontWeight:"bold"}},t.from,": "),t.msg)):s.a.createElement("div",{className:"col-7 mr-auto px-0 py-2"},s.a.createElement("span",{className:"p-2",style:{borderRadius:"10px",backgroundColor:"#b5c6ff"}},s.a.createElement("span",{style:{fontWeight:"bold"}},t.from,": "),t.msg))});return s.a.createElement("div",{className:"card",style:{height:"50hv"}},s.a.createElement("div",{className:"card-header p-2"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-10"},s.a.createElement("i",{className:"fas fa-user pr-1"}),this.props.nombre),s.a.createElement("div",{className:"col-2 text-right"},s.a.createElement("button",{className:"btn p-0 m-0",onClick:this.props.salir},s.a.createElement("i",{class:"fas fa-window-close"}))))),s.a.createElement("div",{className:"card-body py-0",id:"PrivChat",style:{height:"500px",overflowY:"auto"}},t),s.a.createElement("form",{name:"privateMessage",className:"card-footer",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"text",name:"inputPrivate",value:this.state.inputPrivate,onChange:this.handleInput,className:"form-control",required:!0}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Enviar"})))))}}]),t}(n.Component),g=a(15),f=a.n(g),E=(a(47),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).handleExitPrivChat=function(){e.setState({privChat:"",notifications:""})},e.state={inputGlobal:"",privChat:"",messages:[],users:[],notifications:""},e.handleInput=e.handleInput.bind(Object(v.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(v.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.socket.emit("load chat",function(t){e.setState({messages:t})}),this.props.socket.on("usernames",function(t){var a=[];t.forEach(function(e){a.push({name:e,notif:0})}),e.setState({users:a})}),this.props.socket.on("new message",function(t){e.setState({messages:[].concat(Object(d.a)(e.state.messages),[t])});var a=document.getElementById("GlobalChat");a.scrollTop=a.scrollHeight}),this.props.socket.on("new priv message",function(t){if(t.from!==e.state.privChat){var a=e.state.users.map(function(e,a){return e.name===t.from?{name:e.name,notif:parseInt(e.notif)+1}:{name:e.name,notif:e.notif}});e.setState({users:a})}else f.a.options={positionClass:"toast-top-full-width",hideDuration:300,timeOut:6e4},f.a.clear(),setTimeout(function(){return f.a.success("New private message from: '"+t.from+"'")},300)})}},{key:"handleInput",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.socket.emit("send message",this.state.inputGlobal),this.setState({inputGlobal:""});var t=document.getElementById("GlobalChat");t.scrollTop=t.scrollHeight}},{key:"handlePrivChat",value:function(e){if(this.props.minombre!==e){var t=this.state.users.map(function(t,a){return t.name===e?{name:t.name,notif:0}:{name:t.name,notif:t.notif}});this.setState({users:t}),this.setState({privChat:e})}}},{key:"render",value:function(){var e=this,t=this.state.messages.map(function(t,a){return t.user===e.props.minombre?s.a.createElement("div",{className:"col-7 ml-auto text-right px-0 py-2"},s.a.createElement("span",{className:"p-2",style:{borderRadius:"10px",backgroundColor:"#b5ffb9"}},s.a.createElement("span",{style:{fontWeight:"bold"}},t.user,": "),t.msg)):s.a.createElement("div",{className:"col-7 mr-auto px-0 py-2"},s.a.createElement("span",{className:"p-2",style:{borderRadius:"10px",backgroundColor:"#b5c6ff"}},s.a.createElement("span",{style:{fontWeight:"bold"}},t.user,": "),t.msg))}),a=this.state.users.map(function(t,a){return s.a.createElement("button",{class:"btn d-block",onClick:function(){e.handlePrivChat(t.name)}},s.a.createElement("i",{class:"fas fa-user pr-1"}),t.name,t.notif?s.a.createElement("span",{class:"badge badge-danger ml-1"},t.notif):"")});return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-10"},s.a.createElement("div",{className:"row mt-1"},s.a.createElement("div",{className:"col-7"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header p-2"},"Chat"),s.a.createElement("div",{className:"card-body py-0",id:"GlobalChat",style:{height:"500px",overflowY:"auto"}},t),s.a.createElement("form",{name:"globalMessage",className:"card-footer",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"text",name:"inputGlobal",value:this.state.inputGlobal,onChange:this.handleInput,className:"form-control",placeholder:"Mensaje",required:!0}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Enviar"})))))),s.a.createElement("div",{className:"col-5"},this.state.privChat?s.a.createElement(b,{salir:this.handleExitPrivChat,nombre:this.state.privChat,minombre:this.props.minombre,socket:this.props.socket}):""))),s.a.createElement("div",{className:"col-2 mt-1"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header p-2"},"Online Users"),s.a.createElement("div",{className:"card-body",style:{height:"550px",overflowY:"scroll"}},a))))}}]),t}(n.Component)),N=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",password:"",alert:""},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(h.a)({},n,s))},a.handleSubmit=function(e){e.preventDefault(),new RegExp(/^[<>]+$/g).test(a.state.username)?a.setState({alert:"Caracteres invalidos"}):fetch("/login?data="+JSON.stringify(a.state)).then(function(e){return e.json()}).then(function(e){e.ok?a.props.socket.emit("new user",a.state.username,function(e){0===e&&a.props.minombre(a.state.username),1===e&&a.setState({alert:"Nickname already Exists"}),2===e&&a.setState({alert:"You are already chating"})}):a.setState({alert:e.error})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container",id:"loginWindows"},s.a.createElement("div",{className:"row mt-4"},s.a.createElement("div",{className:"col-4 mx-auto"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header text-center"},s.a.createElement("div",{id:"alerta"},this.state.alert?s.a.createElement("div",{class:"alert alert-danger"},this.state.alert):"")),s.a.createElement("div",{className:"card-body",id:"chat"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-group mb-2"},"Username:"),s.a.createElement("div",{className:"input-group mb-2"},s.a.createElement("input",{type:"text",id:"username",name:"username",className:"form-control",onChange:this.handleChange})),s.a.createElement("div",{className:"input-group mb-2"},"Password:"),s.a.createElement("div",{className:"input-group mb-2"},s.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",onChange:this.handleChange})),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"submit",className:"btn btn-primary mx-auto",value:"Login"})))),s.a.createElement("div",{className:"card-footer"},s.a.createElement("button",{class:"btn btn-sm btn-success mx-auto",onClick:this.props.change},"Or Register"))))))}}]),t}(n.Component),y=(n.Component,function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",email:"",password:"",alert:""},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(h.a)({},n,s))},a.handleSubmit=function(e){e.preventDefault(),fetch("/signup?data="+JSON.stringify(a.state)).then(function(e){return e.json()}).then(function(e){e.ok?a.props.registrado():a.setState({alert:e.error})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container",id:"loginWindows"},s.a.createElement("div",{className:"row mt-4"},s.a.createElement("div",{className:"col-4 mx-auto"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header text-center"},s.a.createElement("div",{id:"alerta"},this.state.alert?s.a.createElement("div",{class:"alert alert-danger"},this.state.alert):"")),s.a.createElement("div",{className:"card-body",id:"chat"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-group mb-2"},"Username:"),s.a.createElement("div",{className:"input-group mb-2"},s.a.createElement("input",{type:"text",id:"username",name:"username",className:"form-control",onChange:this.handleChange})),s.a.createElement("div",{className:"input-group mb-2"},"Email:"),s.a.createElement("div",{className:"input-group mb-2"},s.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",onChange:this.handleChange})),s.a.createElement("div",{className:"input-group mb-2"},"Password:"),s.a.createElement("div",{className:"input-group mb-2"},s.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",onChange:this.handleChange})),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"submit",className:"btn btn-success mx-auto",value:"Register"})))),s.a.createElement("div",{className:"card-footer"},s.a.createElement("button",{class:"btn btn-sm btn-primary mx-auto",onClick:this.props.change},"Or Login"))))))}}]),t}(n.Component)),k=a(37),O=a.n(k),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={minombre:"",reg:"",login:"1"},a.handlelogout=function(){fetch("/logout").then(function(e){return e.json()}).then(function(e){e.ok&&(a.socket.emit("logout",e.name),a.setState({minombre:"",login:"1"}))})},a.changeName=function(e){a.setState({minombre:e,login:""})},a.handlechangeOption=function(){a.state.login?a.setState({login:"",reg:"1"}):a.setState({login:"1",reg:""})},a.handleRegistrado=function(){a.setState({reg:"",login:"1"})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.socket=O()("/"),fetch("/logged").then(function(e){return e.json()}).then(function(t){""!==t.name&&(e.socket.emit("new user",t.name,function(e){}),e.setState({minombre:t.name,login:"",reg:""}))})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(p,{logout:this.handlelogout}),s.a.createElement("div",{className:"container-fluid"},this.state.login?s.a.createElement(N,{change:this.handlechangeOption,socket:this.socket,minombre:this.changeName}):null,this.state.reg?s.a.createElement(y,{change:this.handlechangeOption,registrado:this.handleRegistrado}):null,this.state.minombre?s.a.createElement(E,{minombre:this.state.minombre,socket:this.socket}):null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.fd8d04f2.chunk.js.map